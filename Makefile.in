SRC_DIR = ./src
ASM_SRC = $(wildcard $(SRC_DIR)/*.asm)
OBJ_FILES = $(ASM_SRC:.asm=.o)
ASM_FLAGS = -fmacho64

NASM = @NASM@
CC = @CC@
RM = @RM@

all: build

build: alpha

alpha: $(OBJ_FILES)
	$(CC) -o $@ $^

%.o: %.asm
	$(NASM) $(ASM_FLAGS) -o $@ $<

clean:
	$(RM) -f $(OBJ_FILES) alpha

clean-all: clean
	$(RM) -f Makefile configure config.log config.status
	$(RM) -rf autom4te.cache

.PHONY: all build clean clean-all
